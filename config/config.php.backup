<?php
ob_start(); // Output Buffering starten

// Security Headers
header("X-Frame-Options: DENY");
header("X-XSS-Protection: 1; mode=block");
header("X-Content-Type-Options: nosniff");

// Database Settings
define('DB_HOST', 'localhost');
define('DB_NAME', 'deine_db_name'); // ANPASSEN
define('DB_USER', 'deine_db_user'); // ANPASSEN
define('DB_PASS', 'deine_db_pass'); // ANPASSEN

// Microsoft Entra Settings
define('TENANT_ID', 'DEINE_TENANT_ID');     // ANPASSEN
define('CLIENT_ID', 'DEINE_CLIENT_ID');     // ANPASSEN
define('CLIENT_SECRET', 'DEIN_SECRET');     // ANPASSEN
define('REDIRECT_URI', 'https://deine-domain.de/auth/callback.php'); // ANPASSEN

// Role Mapping (IDs aus Entra -> Interne Rollen)
const ROLE_MAPPING = [
    'board_finance'   => '3ad43a76-75af-48a7-9974-7a2cf350f349',
    'board_internal'  => 'f61e99e2-2717-4aff-b3f5-ef2ec489b598',
    'board_external'  => 'bf17e26b-e5f1-4a63-ae56-91ab69ae33ca',
    'alumni_board'    => '8a45c6aa-e791-422e-b964-986d8bdd2ed8',
    'alumni_auditor'  => '39597941-0a22-4922-9587-e3d62ab986d6',
    'alumni'          => '7ffd9c73-a828-4e34-a9f4-10f4ed00f796',
    'honorary_member' => '09686b92-dbc8-4e66-a851-2dafea64df89',
    'head'            => '9456552d-0f49-42ff-bbde-495a60e61e61',
    'member'          => '70f07477-ea4e-4edc-b0e6-7e25968f16c0',
    'candidate'       => '75edcb0a-c610-4ceb-82f2-457a9dde4fc0'
];

// Helper Functions
function asset($path) {
    $protocol = (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off' || $_SERVER['SERVER_PORT'] == 443) ? "https://" : "http://";
    return $protocol . $_SERVER['HTTP_HOST'] . '/' . ltrim($path, '/');
}

function isActivePath($path) {
    return strpos($_SERVER['REQUEST_URI'], $path) !== false;
}
?>
